<!-- Header News Ticker -->
<header class="header">
  <div class="container">
    <div class="header-brand">
      <img src="logo.png" alt="NFL Zone" class="logo" />
    </div>
    <div class="ticker-wrap">
      <div class="ticker" [class.ticker-loading]="rssLoading()">
        <div class="ticker-track">
          @for (item of tickerItems(); track item.link + item.title) {
            <a class="ticker-item" [href]="item.link" target="_blank" rel="noopener noreferrer">
              @if (item.imageUrl) { <img class="ticker-thumb" [src]="item.imageUrl" alt="" loading="lazy" /> }
              <span class="ticker-title">{{ item.title }}</span>
            </a>
          }
        </div>
      </div>
      @if (rssError()) { <div class="rss-error">{{ rssError() }}</div> }
    </div>
  </div>
</header>

<!-- Main Content -->
<main class="main-content">
  <div class="layout">
    <!-- Fixed SaaS-style Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-inner">
        <div class="sidebar-brand">Hub</div>
        <nav class="sidebar-nav">
          <ul>
            @for (link of sidebarLinks; track link.url + link.label) {
              <li>
                <a [href]="link.url" target="_blank" rel="noopener noreferrer">
                  <i class="pi pi-external-link"></i>
                  <span>{{ link.label }}</span>
                </a>
              </li>
            }
          </ul>
        </nav>
        <footer class="sidebar-footer">
          <p>&copy; {{ currentYear() }} NFL Zone</p>
        </footer>
      </div>
    </aside>

    <!-- Scrollable Content Area -->
    <div class="content-wrap" (scroll)="onScroll($event)">
      <div class="content-container">
        <!-- Super Bowl Status Card with inline countdown when not Super Bowl Sunday -->
        <p-card [styleClass]="'status-card' + (isSuperBowlSunday() ? ' is-super-bowl' : '')">
          <div class="status-content">
            @if (isSuperBowlSunday()) {
              <h2 class="status-title success">YES! It's Super Bowl Sunday!</h2>
              <p class="status-message">Grab your snacks and get ready for the big game!</p>
            } @else {
              <h2 class="status-title">No, it's not Super Bowl Sunday</h2>
              @if (timeUntilNext()) {
                <div class="countdown-grid">
                  <p-card styleClass="countdown-item">
                    <div class="countdown-number">{{ timeUntilNext()!.days }}</div>
                    <div class="countdown-label">Days</div>
                  </p-card>
                  <p-card styleClass="countdown-item">
                    <div class="countdown-number">{{ timeUntilNext()!.hours }}</div>
                    <div class="countdown-label">Hours</div>
                  </p-card>
                  <p-card styleClass="countdown-item">
                    <div class="countdown-number">{{ timeUntilNext()!.minutes }}</div>
                    <div class="countdown-label">Minutes</div>
                  </p-card>
                  <p-card styleClass="countdown-item">
                    <div class="countdown-number">{{ timeUntilNext()!.seconds }}</div>
                    <div class="countdown-label">Seconds</div>
                  </p-card>
                </div>
              }
            }
          </div>
        </p-card>

        <!-- Football Fact of the Day (compact) -->
        <p-card styleClass="fact-of-day-card">
          <div class="fact-content compact">
            <div class="fact-decoration left">üèÜ</div>
            <p class="fact-text">
              {{ factOfTheDay().text }}
            </p>
          </div>
        </p-card>

        <!-- News Cards Grid -->
        @if (displayedNewsCards().length) {
          <section class="news-grid">
            @for (n of displayedNewsCards(); track n.link + n.title) {
              <a class="news-card" [href]="n.link" target="_blank" rel="noopener noreferrer">
                @if (n.imageUrl) {
                  <div class="news-image-wrap">
                    <img class="news-image" [src]="n.imageUrl" alt="" loading="lazy" />
                  </div>
                }
                <div class="news-content">
                  <h3 class="news-title">{{ n.title }}</h3>
                  @if (n.summary) {
                    <p class="news-summary">{{ n.summary }}</p>
                  }
                  <div class="news-meta">
                    <span class="news-source">{{ n.source }}</span>
                    @if (n.pubDate) { <span class="news-dot">‚Ä¢</span><span class="news-date">{{ formatDateOnly(n.pubDate) }}</span> }
                  </div>
                </div>
              </a>
            }
          </section>
          @if (isLoadingMore()) {
            <div class="loading-indicator">
              <p>Loading more news...</p>
            </div>
          }
        }
      </div>
    </div>
  </div>
</main>

<!-- Sidebar replaces bottom dock -->

<router-outlet />