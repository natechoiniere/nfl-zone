<!-- Header News Ticker -->
<header class="header">
  <div class="container">
    <div class="header-brand">
      <img src="logo.png" alt="NFL Zone" class="logo" />
    </div>
    <div class="ticker-wrap">
      <div class="ticker" [class.ticker-loading]="rssLoading()">
        <div class="ticker-track">
          @for (item of tickerItems(); track item.link + item.title) {
            <a class="ticker-item" [href]="item.link" target="_blank" rel="noopener noreferrer">
              @if (item.imageUrl) { <img class="ticker-thumb" [src]="item.imageUrl" alt="" loading="lazy" /> }
              <span class="ticker-title">{{ item.title }}</span>
            </a>
          }
        </div>
      </div>
      @if (rssError()) { <div class="rss-error">{{ rssError() }}</div> }
    </div>
  </div>
</header>

<!-- Main Content -->
<main class="main-content">
  <div class="layout">
    <!-- Fixed SaaS-style Sidebar -->
    <aside class="sidebar" [class.expanded]="sidebarExpanded()">
      <button class="sidebar-toggle" (click)="toggleSidebar()" aria-label="Toggle Sidebar">
        <i [class]="sidebarExpanded() ? 'pi pi-chevron-left' : 'pi pi-chevron-right'"></i>
      </button>
      
      <!-- Collapsed view - empty/minimal -->
      <div class="sidebar-collapsed" *ngIf="!sidebarExpanded()">
        <!-- Empty collapsed state - just the toggle button is visible -->
      </div>
      
      <!-- Expanded view - full content -->
      <div class="sidebar-inner" *ngIf="sidebarExpanded()">
        <div class="sidebar-brand">Hub</div>
        <nav class="sidebar-nav">
          <ul>
            @for (link of sidebarLinks; track link.url + link.label) {
              <li>
                <a [href]="link.url" target="_blank" rel="noopener noreferrer">
                  <i class="pi pi-circle-fill"></i>
                  <span>{{ link.label }}</span>
                </a>
              </li>
            }
          </ul>
        </nav>
        
        <!-- Super Bowl Countdown (sidebar) -->
        <div class="sidebar-countdown">
          <div class="countdown-title">Next Super Bowl</div>
          @if (isSuperBowlSunday()) {
            <div class="countdown-text">It's Super Bowl Sunday! üèà</div>
          } @else {
            <div class="countdown-text">
              {{ timeUntilNext()!.days }}d {{ timeUntilNext()!.hours }}h {{ timeUntilNext()!.minutes }}m
            </div>
          }
        </div>
        
        <footer class="sidebar-footer">
          <p>&copy; {{ currentYear() }} NFL Zone</p>
        </footer>
      </div>
    </aside>

    <!-- Scrollable Content Area -->
    <div class="content-wrap" (scroll)="onScroll($event)">
      <div class="content-container">

        <!-- Simple Fact of the Day -->
        <p-card styleClass="fact-of-day-card">
          <div class="fact-content">
            <p class="fact-text">
              {{ factOfTheDay().text }}
            </p>
          </div>
        </p-card>

        <!-- News Cards Grid -->
        @if (displayedNewsCards().length) {
          <section class="news-grid">
            @for (n of displayedNewsCards(); track n.link + n.title) {
              <a class="news-card" [href]="n.link" target="_blank" rel="noopener noreferrer">
                @if (n.imageUrl) {
                  <div class="news-image-wrap">
                    <img class="news-image" [src]="n.imageUrl" alt="" loading="lazy" />
                  </div>
                }
                <div class="news-content">
                  <h3 class="news-title">{{ n.title }}</h3>
                  @if (n.summary) {
                    <p class="news-summary">{{ n.summary }}</p>
                  }
                  <div class="news-meta">
                    <span class="news-source">{{ n.source }}</span>
                    @if (n.pubDate) { <span class="news-dot">‚Ä¢</span><span class="news-date">{{ formatDateOnly(n.pubDate) }}</span> }
                  </div>
                </div>
              </a>
            }
          </section>
          @if (isLoadingMore()) {
            <div class="loading-indicator">
              <p>Loading more news...</p>
            </div>
          }
        }
      </div>
    </div>
  </div>
</main>

<!-- Sidebar replaces bottom dock -->

<router-outlet />